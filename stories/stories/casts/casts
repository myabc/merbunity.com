Story: All things relating to setting up and using casts

  As a author of merbasts 
  I want to do things with casts
  So that merbcasts can have casts
  
  Scenario: Upload a cast as an anonymous author
    Given cast upload form data
    And an anonymous author
    And no current casts in the database
    
    When the author posts form data to: /casts/
    
    Then the author should be redirected to: /login
    And there should be 0 casts in the database
  
  Scenario: Upload a cast as an active author
    Given an active author
    And cast upload form data
    And no current casts in the database
    
    When the author posts form data to: /casts/
    
    Then the author should be logged in
    And there should be 1 casts in the database
    And the author should be redirected to the new cast
    And the cast should be: pending

  Scenario: Upload a cast as an active publisher
    Given an active publisher
    And cast upload form data
    And no current casts in the database
    
    When the author posts form data to: /casts/
    
    Then the author should be logged in
    And there should be 1 casts in the database
    And the author should be redirected to the new cast
    And the cast should not be: pending
    And the cast should be: published
    
  Scenario: Edit a cast as an anonymous author
    Given an active author
    And 1 current pending casts in the database
    And using the first cast found
    And an anonymous author
    
    When the author gets edit for the current cast
    
    Then the author should be redirected to: /login
    
  Scenario: Edit a cast as an active author who does not own the cast
    Given an active author named: joe
    And 1 current pending casts in the database
    And using the first cast found belonging to: joe
    And an active author named: midge
    
    When the author gets edit for the current cast
    
    Then the author should see the error page: NotFound
  
  Scenario: Edit a cast as an active author who does own the cast
    Given an active author named: joe
    And 1 current pending casts in the database
    And using the first cast found belonging to: joe
    
    When the author gets edit for the current cast
    
    Then the author should see the page: Casts edit
    
  Scenario: Edit a cast as an active publisher who does not own the cast
    Given an active author named: joe
    And 1 current published casts in the database
    And using the first cast found belonging to: joe
    And an active publisher named: ted
    
    When the author gets edit for the current cast
    
    Then the author should see the page: Casts edit
  
  Scenario: Update a cast as an anonymous author
    GivenScenario Edit a cast as an anonymous author
    And update data for cast: title My New Title
    
    When the author puts data to the current cast
    
    Then the author should see the error page: NotFound
  
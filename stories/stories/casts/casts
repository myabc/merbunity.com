Story: All things relating to setting up and using casts

  As a person of merbasts 
  I want to do things with casts
  So that merbcasts can have casts
    
  Scenario: An anonymous user visits the casts index should not see pending casts
    Given no current casts in the database
    And an active person named: joe
    And 5 current pending casts in the database
    And 2 current published casts in the database
    And an anonymous person
    
    When the person visits /casts
    
    Then the controller should show 2 published casts
    And the controller should show 0 pending casts
    
  
  Scenario: An active person visits the casts index should not see pending casts
    Given no current casts in the database
    And an active person named: joe
    And 5 current pending casts in the database
    And 2 current published casts in the database

    When the person visits /casts

    Then the controller should show 2 published casts
    And the controller should show 0 pending casts
    
  Scenario: An active person visits the casts index should not see pending casts
    Given no current casts in the database
    And an active person named: joe
    And 5 current pending casts in the database
    And 2 current published casts in the database
    And an active publisher named: hottie

    When the person visits /casts

    Then the controller should show 2 published casts
    And the controller should show 0 pending casts
  
  Scenario: An anonymous person visits the show page should not see pending casts
    Given no current casts in the database
    And an active person named: joe
    And 5 current pending casts in the database
    And using the first cast found
    And an anonymous person
    
    When the person gets show for the current cast
    
    Then the person should be redirected to: /casts

  Scenario: An active person visits the show page should not see pending casts
    Given no current casts in the database
    And an active person named: joe
    And 5 current pending casts in the database
    And using the first cast found

    When the person gets show for the current cast

    Then the person should be redirected to: /casts

  Scenario: An active publisher visits the show page should not see pending casts
    Given no current casts in the database
    And an active person named: joe
    And 5 current pending casts in the database
    And using the first cast found
    And an active publisher named: hootie_van_tootie

    When the person gets show for the current cast

    Then the person should be redirected to: /casts
Story: Uploading Merb Casts

  As a person of merbasts 
  I want to upload casts
  So that they will be available on the site
  
  Scenario: Upload a cast as an anonymous person
    Given cast upload form data
    And an anonymous person
    And no current casts in the database
    
    When the person posts form data to: /casts/
    
    Then the person should be redirected to: /login
    And there should be 0 casts in the database
  
  Scenario: Upload a cast as an active person
    Given an active person
    And cast upload form data
    And no current casts in the database
    
    When the person posts form data to: /casts/
    
    Then the person should be logged in
    And there should be 1 casts in the database
    And the person should be redirected to the pending cast
    And the cast should be: pending

  Scenario: Upload a cast as an active publisher
    Given an active publisher
    And cast upload form data
    And no current casts in the database
    
    When the person posts form data to: /casts/
    
    Then the person should be logged in
    And there should be 1 casts in the database
    And the person should be redirected to the new cast
    And the cast should not be: pending
    And the cast should be: published
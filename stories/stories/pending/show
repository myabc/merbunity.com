Story: Viewing the show action for pending stories

  As a user of merbcasts
  I want to view pending stories
  So that I can review them to see if they should be published
  
  Scenario: A clean database
    Given no people in the database
    And no current casts in the database
  
  Scenario: An anonymous person tries to access pending cast
    GivenScenario: A clean database
    And an active person named: larry
    And 13 current pending casts in the database
    And 12 current published casts in the database
    And using the first pending cast found belonging to: larry
    And an anonymous person
    
    When the person gets show for the pending cast
    
    Then the person should be redirected to: /login
  
  Scenario: An active person tries to access a pending cast they own
    GivenScenario: A clean database
    And an active person named: joe
    And 5 current pending casts in the database
    And using the first pending cast found belonging to: joe
    
    When the person gets show for the pending cast
    
    Then the person should see the page: pending show
  
  Scenario: An active person tries to access a pending cast they do not own
    GivenScenario: A clean database
    And an active person named: bluey
    And 2 current pending casts in the database
    And an active person named: carol
    And using the first pending cast found belonging to: bluey
    
    When the person gets show for the pending cast
    
    Then the person should see the error page: NotFound
    
  Scenario: An active publisher tries to access a pending cast they own
    GivenScenario: A clean database
    And an active person named: red
    And 2 current pending casts in the database
    And an active publisher named: johnson
    And using the first pending cast found belonging to: red
    
    When the person gets show for the pending cast
    
    Then the person should see the page: pending show